<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Bulk Linker</title>
    <meta name="theme-color" content="#25D366">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <style>
        :root{--primary:#25D366;--dark:#075E54;--light:#f0f2f5}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:var(--light);margin:0;padding:20px;display:flex;flex-direction:column;align-items:center;min-height:100vh}
        .container{background:white;width:100%;max-width:500px;padding:20px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.1);margin-bottom:20px}
        h1{color:var(--dark);text-align:center;margin-top:0;font-size:20px}
        label{font-weight:700;display:block;margin-bottom:5px;color:#333}
        textarea{width:100%;padding:12px;margin-bottom:15px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:14px;height:120px;resize:vertical}
        button{background:var(--primary);color:white;border:none;width:100%;padding:14px;font-size:16px;font-weight:700;border-radius:8px;cursor:pointer;transition:background .2s;margin-top:5px}
        button:hover{background:var(--dark)}
        .result-area{margin-top:20px}
        .link-card{background:#e8f5e9;padding:12px;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;border-left:5px solid var(--primary);flex-wrap:wrap;gap:8px}
        .link-card a{text-decoration:none;color:white;font-weight:700;background:var(--primary);padding:6px 12px;border-radius:6px}
        .link-card a:hover{background:var(--dark)}
        .footer{text-align:center;font-size:13px;color:#555;background:white;padding:15px;border-radius:8px;width:100%;max-width:500px;margin-top:10px}
        .footer a{color:var(--primary);text-decoration:none;font-weight:700}
        .toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#333;color:white;padding:10px 20px;border-radius:8px;font-size:14px;opacity:0;transition:opacity .3s;z-index:1000}
        .toast.show{opacity:1}
        .preset-btn{background:#075E54;margin-bottom:10px}
        .preset-btn:hover{background:#054c44}
        .info{text-align:center;font-size:12px;color:#666;margin:5px 0}
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ WA Bulk Sender</h1>
        
        <button class="preset-btn" onclick="loadPreset()">üìã Load CivilTech Message</button>
        <p class="info">üí° Click above to load pre-tested message with emojis</p>
        
        <label for="message">Message:</label>
        <textarea id="message" placeholder="Type message or use preset button above..."></textarea>

        <label for="numbers">Phone Numbers (one per line):</label>
        <textarea id="numbers" placeholder="919876543210&#10;918888616728"></textarea>
        <p class="info">* Format: CountryCode+Number (no + or spaces)</p>

        <button onclick="generate()">‚ú® Generate Links</button>
        <div id="results" class="result-area"></div>
    </div>

    <div class="footer">
        By <strong>Ganesh Eknath Raykar</strong><br>
        <a href="https://wa.me/919011271052" target="_blank">+91 90112 71052</a>
    </div>
    <div id="toast" class="toast">Copied! üìã</div>

    <script>
        // ‚úÖ 100% ASCII-SAFE PRE-ENCODED MESSAGE (No emojis in source code!)
        // This string uses URL encoding (%XX) so GitHub/paste won't corrupt it
        const PRESET_ENCODED = "üèóÔ∏è%20CivilTech%20India%20Private%20Limited%20üß™%0AYour%20Trusted%20Partner%20for%20Material%20Testing%20Services%0A%0AHello!%20üëã%0AWe%20noticed%20your%20inquiry%20regarding%20material%20testing%20services%20%E2%80%93%20thank%20you%20for%20reaching%20out!%20We're%20delighted%20to%20offer%20our%20specialized%20testing%20solutions%20at%20our%20NABL-accredited%20facility%20in%20Satpur%2C%20Nashik.%0A%0Aüî¨%20Our%20Testing%20Services%20Include:%0Aüíß%20Water%20Testing%0A%20%E2%80%A2%20Drinking%20Water%0A%20%E2%80%A2%20Construction%20Water%0A%20%E2%80%A2%20Waste%20Water%0A%0AüçΩÔ∏è%20Food%20Materials%20Analysis%0A%20%E2%80%A2%20food%20%26%20beverage%20testing%0A%0Aüß±%20Construction%20Materials%20Testing%0A%20%E2%80%A2%20Cement%20%7C%20Fly%20Ash%20%7C%20GGBS%20%7C%20Admixtures%20%7C%20Soil%0A%0A‚úÖ%20Why%20Choose%20CivilTech?%0A‚≠ê%20NABL%20Accredited%20%E2%80%93%20ISO/IEC%2017025:2017%20certified%20lab%0A‚≠ê%20Expert%20Team%0A‚≠ê%20Advanced%20Technology%20%E2%80%93%20Cutting-edge%20equipment%20for%20in-house%20%26%20on-site%20testing%0A‚≠ê%20Strategic%20Location%20%E2%80%93%20Easy%20access%20in%20Nashik%20industrial%20hub%0A%0Aüìç%20Visit%20Us:%0ACivilTech%20India%20Private%20Limited%0APlot%20No.%20B-45%2C%20NICE%20Area%2C%20Satpur%20MIDC%2C%20Satpur%2C%20Nashik%20%E2%80%93%20422007.%0A%0Aüì©%20Next%20Steps:%0APlease%20let%20us%20know:%0Aüîπ%20Which%20specific%20material%20%26%20tests%20you%20require?%0Aüîπ%20Or%20share%20your%20sample%20details%20for%20a%20free%2C%20formal%20quotation!%0A%0Aüìû%20Contact%20Us:%0A%2B91%209011000574%0Aüåê%20https://civiltechindia.com/%0A%0AWe%20look%20forward%20to%20supporting%20your%20quality%20assurance%20needs!%20ü§ù‚ú®%0A%0ABest%20regards,%0ATeam%20CivilTech%20India%20Pvt%20Ltd%20üèÜ%0Aüó∫Ô∏è%20Google%20map%20location:%20https://url-shortener.me/DRSL";

        function loadPreset() {
            // Decode for display (user can edit if needed)
            document.getElementById('message').value = decodeURIComponent(PRESET_ENCODED);
            showToast('‚úÖ Message loaded! Click "Generate Links" below.');
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 2000);
        }

        function copy(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Copied! üìã');
            }).catch(() => {
                // Fallback
                const ta = document.createElement('textarea');
                ta.value = text;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                showToast('Copied! üìã');
            });
        }

        function generate() {
            const msg = document.getElementById('message').value.trim();
            const nums = document.getElementById('numbers').value.trim();
            const res = document.getElementById('results');
            res.innerHTML = '';
            
            if (!msg || !nums) { alert('‚ö†Ô∏è Fill both fields'); return; }
            
            // Normalize & encode message
            const cleanMsg = msg.replace(/\r\n/g,'\n').replace(/\r/g,'\n');
            const encoded = encodeURIComponent(cleanMsg);
            
            const list = nums.split('\n').map(n=>n.trim()).filter(n=>n);
            let count = 0;
            
            list.forEach(num => {
                const clean = num.replace(/[^0-9]/g,'');
                if (clean.length >= 10) {
                    count++;
                    // ‚úÖ CRITICAL: No spaces in URL!
                    const link = `https://wa.me/${clean}?text=${encoded}`;
                    
                    const card = document.createElement('div');
                    card.className = 'link-card';
                    card.innerHTML = `
                        <strong>üì± +${clean}</strong>
                        <div style="display:flex;gap:8px;flex-wrap:wrap">
                            <a href="${link}" target="_blank">Open Chat ‚û§</a>
                            <button onclick="copy('${link}')" style="background:#075E54;padding:6px 12px;border:none;border-radius:6px;color:white;cursor:pointer">Copy üîó</button>
                        </div>
                    `;
                    res.appendChild(card);
                }
            });
            
            if (count === 0) {
                res.innerHTML = '<p style="color:#666;text-align:center">‚ö†Ô∏è No valid numbers. Format: 919876543210</p>';
            } else {
                showToast(`‚úÖ Generated ${count} link${count>1?'s':''}!`);
            }
        }

        // Ctrl+Enter shortcut
        document.getElementById('message').onkeydown = e => { if(e.ctrlKey&&e.key==='Enter') generate(); };
        document.getElementById('numbers').onkeydown = e => { if(e.ctrlKey&&e.key==='Enter') generate(); };
    </script>
</body>
</html>
